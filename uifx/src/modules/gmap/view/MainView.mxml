<?xml version="1.0" encoding="utf-8"?>
<!--
 Copyright (C) 2009 NagVis Project
 
 License:
 
 This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License version 2 as
 published by the Free Software Foundation.
 
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
-->
<mx:Canvas 
	xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:view="modules.gmap.view.*"
	xmlns:controls="modules.gmap.view.controls.*"
	xmlns:ui="lib.ui.*" 
	
	horizontalScrollPolicy="off" verticalScrollPolicy="off"
	creationComplete="init()"
>
	<mx:Script>
		<![CDATA[
			public static const READY : String = "MainViewReady";
			
			private function init():void
			{
				dispatchEvent(new Event(READY, true));
			}
		]]>
	</mx:Script>

	<mx:Style>
		@font-face
		{
			fontFamily: embededArial;
    		src: local("Arial");
    		font-weight: bold;
    		advancedAntiAliasing: true;
		}
	</mx:Style>
	<mx:Script>
		<![CDATA[
            [Bindable] [Embed(source="modules/gmap/img/locate.jpg")]
			private var searchImage : Class;

			[Bindable] [Embed(source="modules/gmap/img/edit.png")]
			private var editImage : Class;

			[Bindable] [Embed(source="modules/gmap/img/map.gif")]
			private var viewpointImage : Class;

			[Bindable] [Embed(source="modules/gmap/img/settings.png")]
			private var settingsImage : Class;
		]]>
	</mx:Script>

	<mx:Script source="../GMapModule.as"/>

	<controls:GMapControl left="0" top="0" right="0" bottom="0"/>

	<view:DialogSettings id="settingsBox"
		logo="{settingsImage}"
		bottom="50" right="-10" width="310"
		expandedWidth="300" expandedHeight="110"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
	/>
	<ui:EdgeBoxGroup id="ebg"/>
	<view:DialogLink id="linksBox" group="{ebg}"
		logo="{viewpointImage}"
		y="{locationBox.y + locationBox.height + 5}" right="-10" width="310"
		expandedWidth="300" expandedHeight="150"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
		link="onLink()"
		expanded="onShowLinkBox()"
	/>
	<view:DialogLocation id="locationBox" group="{ebg}"
		logo="{editImage}"
		y="{searchBox.y + searchBox.height + 5}" right="-10" width="310"
		expandedWidth="300" expandedHeight="220"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
		save="onSaveLocation()"
		remove="onDeleteLocation()"
		contracted="onHideLocationBox()"
		expanded="onShowLocationBox()"
	/>
	<view:DialogSearch id="searchBox" group="{ebg}"
		logo="{searchImage}"
		y="{viewpointBox.y + viewpointBox.height + 5}" right="-10" width="310"
		expandedWidth="300" expandedHeight="130"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
		locate="onLocateAddress(searchBox.address.text)"
		contracted="onHideSearchBox()"
	/>
	<view:DialogViewpoint id="viewpointBox" group="{ebg}"
		logo="{viewpointImage}"
		y="100" right="-10" width="310"
		expandedWidth="300" expandedHeight="220"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
	/>	
</mx:Canvas>
