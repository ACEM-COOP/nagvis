<?xml version="1.0" encoding="utf-8"?>
<!--
 Copyright (C) 2009 NagVis Project
 
 License:
 
 This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License version 2 as
 published by the Free Software Foundation.
 
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
-->
<mx:Module xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:gmap="modules.gmap.*"
	xmlns:ui="lib.ui.*"
	layout="absolute" width="100%" height="100%"
	horizontalScrollPolicy="off" verticalScrollPolicy="off"
	creationComplete="init()"
>
	<mx:Style>
		@font-face
		{
			fontFamily: embededArial;
    		src: local("Arial");
    		font-weight: bold;
    		advancedAntiAliasing: true;
		}
	</mx:Style>
	<mx:Style source="GMapModule.css" />
	<mx:Script>
		<![CDATA[
            [Bindable] [Embed(source="modules/gmap/img/locate.jpg")]
			private var searchImage : Class;

			[Bindable] [Embed(source="modules/gmap/img/edit.png")]
			private var editImage : Class;

			[Bindable] [Embed(source="modules/gmap/img/map.gif")]
			private var viewpointImage : Class;

			[Bindable] [Embed(source="modules/gmap/img/settings.png")]
			private var settingsImage : Class;
		]]>
	</mx:Script>
	<mx:Script source="GMapModule.as"/>
	<mx:UIComponent id="mapContainer" width="100%" height="100%"/>
	<gmap:DialogSettings id="settingsBox"
		logo="{settingsImage}"
		bottom="50" right="-10" width="310"
		expandedWidth="300" expandedHeight="110"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
	/>
	<ui:EdgeBoxGroup id="ebg"/>
	<gmap:DialogLink id="linksBox" group="{ebg}"
		logo="{viewpointImage}"
		y="{locationBox.y + locationBox.height + 5}" right="-10" width="310"
		expandedWidth="300" expandedHeight="150"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
		link="onLink()"
		expanded="onShowLinkBox()"
	/>
	<gmap:DialogLocation id="locationBox" group="{ebg}"
		logo="{editImage}"
		y="{searchBox.y + searchBox.height + 5}" right="-10" width="310"
		expandedWidth="300" expandedHeight="220"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
		save="onSaveLocation()"
		remove="onDeleteLocation()"
		contracted="onHideLocationBox()"
		expanded="onShowLocationBox()"
	/>
	<gmap:DialogSearch id="searchBox" group="{ebg}"
		logo="{searchImage}"
		y="{viewpointBox.y + viewpointBox.height + 5}" right="-10" width="310"
		expandedWidth="300" expandedHeight="130"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
		locate="onLocateAddress(searchBox.address.text)"
		contracted="onHideSearchBox()"
	/>
	<gmap:DialogViewpoint id="viewpointBox" group="{ebg}"
		logo="{viewpointImage}"
		y="100" right="-10" width="310"
		expandedWidth="300" expandedHeight="220"
		contractedWidth="40" contractedHeight="40"
		currentState="right-contracted"
		save="onSaveViewpoint(viewpointBox.preName.text)"
		change="onSelectViewpoint(event)"
	/>
	<mx:RemoteObject id="rViewpoints" destination="zend" source="Viewpoint" fault="fault(event)">
		<mx:method name="getAll" result="getViewpoints_handler(event)"/>
		<mx:method name="add" result="addViewpoint_handler(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="rLocations" destination="zend" source="Location" fault="fault(event)">
		<mx:method name="getAll" result="getLocations_handler(event)"/>
		<mx:method name="add" result="addLocation_handler(event)"/>
		<mx:method name="edit" result="editLocation_handler(event)"/>
		<mx:method name="remove" result="removeLocation_handler(event)"/>
		<mx:method name="find" result="findLocation_handler(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="rLinks" destination="zend" source="Link" fault="fault(event)">
		<mx:method name="getAll" result="getLinks_handler(event)"/>
		<mx:method name="add" result="addLink_handler(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="rDatabase" destination="zend" source="Database" fault="fault(event)">
		<mx:method name="getHosts" result="getHosts_handler(event)"/>
		<mx:method name="getHostGroups" result="getHostGroups_handler(event)"/>
		<mx:method name="getServices" result="getServices_handler(event)"/>
		<mx:method name="getServiceGroups" result="getServiceGroups_handler(event)"/>
	</mx:RemoteObject>
</mx:Module>
